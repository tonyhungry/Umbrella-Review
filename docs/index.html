<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tony Hung">
<meta name="dcterms.date" content="2023-05-16">

<title>Umbrella Review of Resilience Measurement - Write Up</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body>

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#abstract" id="toc-abstract" class="nav-link active" data-scroll-target="#abstract"><span class="header-section-number">1</span> Abstract</a>
  <ul class="collapse">
  <li><a href="#keywords" id="toc-keywords" class="nav-link" data-scroll-target="#keywords"><span class="header-section-number">1.1</span> Keywords</a></li>
  </ul></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">2</span> Introduction</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods"><span class="header-section-number">3</span> Methods</a>
  <ul class="collapse">
  <li><a href="#scoping-scopus-literature-search" id="toc-scoping-scopus-literature-search" class="nav-link" data-scroll-target="#scoping-scopus-literature-search"><span class="header-section-number">3.1</span> Scoping Scopus (Literature Search)</a></li>
  <li><a href="#synthesis-method" id="toc-synthesis-method" class="nav-link" data-scroll-target="#synthesis-method"><span class="header-section-number">3.2</span> Synthesis Method</a></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results"><span class="header-section-number">4</span> Results</a>
  <ul class="collapse">
  <li><a href="#bibliometric-reporting" id="toc-bibliometric-reporting" class="nav-link" data-scroll-target="#bibliometric-reporting"><span class="header-section-number">4.1</span> Bibliometric Reporting</a></li>
  <li><a href="#resilience-definitions" id="toc-resilience-definitions" class="nav-link" data-scroll-target="#resilience-definitions"><span class="header-section-number">4.2</span> Resilience Definitions</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Write Up</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Tony Hung </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 16, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="abstract" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="abstract"><span class="header-section-number">1</span> Abstract</h2>
<section id="keywords" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="keywords"><span class="header-section-number">1.1</span> Keywords</h3>
<p>Resilience Measurement, Meta Review, Natural Language Processing</p>
</section>
</section>
<section id="introduction" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="introduction"><span class="header-section-number">2</span> Introduction</h2>
</section>
<section id="methods" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="methods"><span class="header-section-number">3</span> Methods</h2>
<section id="scoping-scopus-literature-search" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="scoping-scopus-literature-search"><span class="header-section-number">3.1</span> Scoping Scopus (Literature Search)</h3>
<p>The literature search started with an experimental search in March 2023. The aim of the experimental search of literature is to scout the volume and diversity of the available literature. It was evident from this experiment that there exists a colossal amount of reviews on resilience and not all reviews are equal. This experiment was helpful in further determining the exclusion and inclusion criteria and optimizing the search query as well as the steps for screening review articles.</p>
<p>The Scopus search for literature was conducted on the 3rd of April 2023. There are no publication date limitations, which means that any publication published on or before 3rd of April 2023 are accepted. The review process was assisted by using Rayyan. The schematic, adapted PRISMA representation is shown in the following figure.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/PRISMA Flowchart.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">PRISMA flow chart</figcaption>
</figure>
</div>
<p>The main keywords used in the query for searching on the Scopus database in titles, abstracts, and keywords were “soci*”, “commun*”, “neighbour*”, “urban”, “econom*”, “financi*”, “infrastruct*”, “disast*”, “climate” and “resilience”. This search query is further restricted by excluding the following keywords in the title-abstract-key: “covid”, “corona”, “COVID-19”, “agri*”, “supply chain”, “agro*”, “land”, “education”, “migration”, “sport”, “war”, “coral”, “farm*” and restricted again with the following keywords in the title: “politics”, “policy”, “ecosystem”, “forest”, “worker”, “governance”, “river”, “ecolo*”, “biodiversity”, “institution*”, since it is out of scope for the paper. The document type is set to reveal review journal articles only. Obvious subject areas such as medicine, agricultural and biological sciences, psychology, biochemistry, genetics and molecular biology, computer science, neuroscience, nursing, immunology and microbiology, chemical engineering, health professions, physics and astronomy, chemistry, pharmacology, toxicology, pharmaceutics, veterinary, dentistry, arts and humanities, business, management and accounting, mathematics, and materials science are all excluded. The language of the review articles is limited to English only. Finally, the search query specifies the following keywords that should appear for inclusion: resilience, climate change,, disasters, and disaster. This search query<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> resulted in 446 articles in total.</p>
<p>The inclusion and exclusion criteria of review articles are listed in the table below.</p>
<table class="table">
<colgroup>
<col style="width: 66%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Inclusion Criteria</th>
<th>Exclusion Criteria</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><ul>
<li><p>Studies that focuses on resilience against climate change or natural disaster event, with the context of human settlements.</p></li>
<li><p>Study must focus on measuring resilience.</p></li>
<li><p>Study must be a systematic review or a review conducted in a systematic fashion.</p></li>
<li><p>All studies published up until 3rd April 2023.</p></li>
<li><p>Study must be in English.</p></li>
<li><p>Study must be a peer-reviewed article.</p></li>
<li><p>Study must either be on infrastructure resilience, social resilience, or economic resilience.</p></li>
</ul></td>
<td><ul>
<li><p>Bibliometric reviews.</p></li>
<li><p>Reviews that focuses on risk, vulnerability, or adaptation.</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>Learning from the experimental search exercise, it was difficult to determine if an article was truly a review article or not by simply scanning from the title, abstract and keywords. It was interesting to point out that even though the filter for review articles was switched on, there were still a myriad of articles that were not review articles to begin with. To further simplify the process, an additional line<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> in the search query was appended, where it only includes articles that mentions “review”, “overview”, or “survey” in either title, abstract, or keyword. This additional exclusion resulted in 341 articles awaiting to be screened.</p>
<p>Following the screening of 341 articles, 256 articles were removed due to not being in scope with this paper. The main reasons for removing the articles was that the articles focused on sustainability, nature (such as forests or lakes), governance, health, particular species (such as beetles or plants), technology, etc. Furthering the screening and filtering of articles, 85 reviews were under full-text screening. The purpose of full-text screening is to ensure that all inclusion and exclusion criteria are met. A substantial portion of the articles were removed either due to not being a systematic review or simply not being a review article.</p>
<p>After the full-text screening, the remaining 21 articles were controlled using the Methodological Quality Checklist &lt;insert citation here, Bird article&gt;. The checklist consists of 7 questions, and for each question, if the review satisfy the requirement or question, the review receives 1 point, which results in 7 full possible points. The checklist is slightly adapted for question 1, where if there is a clear aim or purpose for the review, then the review itself would satisfy the question. Following the example of Bird (2018), this meta review would include any review that received four or more points, as those were “deemed moderate-to-high quality” (Bird, 2018). Although the checklist may appear simple, but it was a rather effective astringent in determining the quality of the review articles. All except one review satisfy question 5 of the checklist, which asked if the primary studies have been quality assessed. The other question where only 2 reviews satisfied, was about if each stage of the review process have been involved by at least two authors. Finally, this umbrella review proceeds with analysis and synthesis with 11 systematic reviews. The table below lists the final 11 reviews synthesized in this paper.</p>
<table class="table">
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>ID</strong></td>
<td style="text-align: center;"><strong>Article Name</strong></td>
<td style="text-align: center;"><strong>DOI</strong></td>
<td style="text-align: center;"><strong>Author Names</strong></td>
<td style="text-align: center;"><strong>Keywords</strong></td>
<td style="text-align: center;"><strong>Category</strong></td>
<td style="text-align: center;"><strong>Year of Publication</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">Coastal community resilience frameworks for disaster risk management</td>
<td style="text-align: center;"><a href="https://doi.org/10.1007/s11069-020-03875-3" class="uri">https://doi.org/10.1007/s11069-020-03875-3</a></td>
<td style="text-align: center;">A. Almutairi, M. Mourshed, R.F.M. Ameen</td>
<td style="text-align: center;">Coastal communities · Resilience indicators · Assessment framework · Coastal hazards · Disaster risk management</td>
<td style="text-align: center;">Social</td>
<td style="text-align: center;">2020</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: center;">Critical review of urban community resilience indicators</td>
<td style="text-align: center;"><a href="https://doi.org/10.1108/SASBE-08-2022-0180" class="uri">https://doi.org/10.1108/SASBE-08-2022-0180</a></td>
<td style="text-align: center;">Robert Osei-Kyei, Vivian Tam, Ursa Komac, Godslove Ampratwum</td>
<td style="text-align: center;">Urban community, resilience, criteria, indicators, disasters</td>
<td style="text-align: center;">Social</td>
<td style="text-align: center;">2023</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">Improving the resilience of critical infrastructures: Evidence-based insights from a systematic literature review</td>
<td style="text-align: center;"><a href="https://doi.org/10.1016/j.ijdrr.2022.103123" class="uri">https://doi.org/10.1016/j.ijdrr.2022.103123</a></td>
<td style="text-align: center;">Bawantha Rathnayaka, Chandana Siriwardana, Dilan Robert, Dilanthi Amaratunga, Sujeeva Setunge</td>
<td style="text-align: center;">Disaster risk reduction, Resilience, Disasters, Critical infrastructure, Criticality assessment, Damage reduction, Sendai framework</td>
<td style="text-align: center;">Infrastructure</td>
<td style="text-align: center;">2022</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4</td>
<td style="text-align: center;">Indicators to assess organizational resilience – a review of empirical literature</td>
<td style="text-align: center;">10.1108/IJDRBE-11-2018-0046</td>
<td style="text-align: center;">Khalil Rahi</td>
<td style="text-align: center;">Resilience, organizational resilience, indicators, empirical studies, awareness, adapative capactiy</td>
<td style="text-align: center;">Social</td>
<td style="text-align: center;">2019</td>
</tr>
<tr class="even">
<td style="text-align: center;">5</td>
<td style="text-align: center;">Infrastructure resilience curves: Performance measures and summary metrics</td>
<td style="text-align: center;"><a href="https://doi.org/10.1016/j.ress.2021.107926" class="uri">https://doi.org/10.1016/j.ress.2021.107926</a></td>
<td style="text-align: center;">Craig Poulin , Michael B. Kane</td>
<td style="text-align: center;">Resilience, Critical infrastructure, Metrics, Performance measures. System analysis</td>
<td style="text-align: center;">Infrastructure</td>
<td style="text-align: center;">2021</td>
</tr>
<tr class="odd">
<td style="text-align: center;">6</td>
<td style="text-align: center;">Mapping urban resilience to disasters – A review</td>
<td style="text-align: center;"><a href="https://doi.org/10.1016/j.scs.2019.101746" class="uri">https://doi.org/10.1016/j.scs.2019.101746</a></td>
<td style="text-align: center;">Jean-Marie Cariolet, Marc Vuillet, Youssef Diab</td>
<td style="text-align: center;">Urban resilience, Map, GIS, resilience indicators</td>
<td style="text-align: center;">Social</td>
<td style="text-align: center;">2019</td>
</tr>
<tr class="even">
<td style="text-align: center;">7</td>
<td style="text-align: center;">Resilience of critical infrastructure to natural hazards: A review focused on drinking water systems</td>
<td style="text-align: center;"><a href="https://doi.org/10.1016/j.ijdrr.2020.101575" class="uri">https://doi.org/10.1016/j.ijdrr.2020.101575</a></td>
<td style="text-align: center;">Gabriela Quitana, María Molinos-Senante, Alondra Chamorro</td>
<td style="text-align: center;">Resilience, Critical infrastructure, Drinking water, Natural hazard, Literature review</td>
<td style="text-align: center;">Infrastructure</td>
<td style="text-align: center;">2020</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8</td>
<td style="text-align: center;">Resilience of urban transportation systems. Concept, characteristics, and methods.</td>
<td style="text-align: center;"><a href="https://doi.org/10.1016/j.jtrangeo.2020.102727" class="uri">https://doi.org/10.1016/j.jtrangeo.2020.102727</a></td>
<td style="text-align: center;">L.A.P.J. Gonçalves, P.J.G. Ribeiro</td>
<td style="text-align: center;">Resilience, Transportation system, Urban networks, Urban transportation modes</td>
<td style="text-align: center;">Infrastructure</td>
<td style="text-align: center;">2020</td>
</tr>
<tr class="even">
<td style="text-align: center;">9</td>
<td style="text-align: center;">Resilience theory incorporated into urban wastewater systems management. State of the art</td>
<td style="text-align: center;"><a href="http://dx.doi.org/10.1016/j.watres.2017.02.047" class="uri">http://dx.doi.org/10.1016/j.watres.2017.02.047</a></td>
<td style="text-align: center;">P. Juan-García, D. Butler, J. Comas, G. Darch, C. Sweetapple, A. Thornton, Ll Corominas</td>
<td style="text-align: center;">Management, Resilience, Sewer systems, Wastewater, WRRF</td>
<td style="text-align: center;">Infrastructure</td>
<td style="text-align: center;">2017</td>
</tr>
<tr class="odd">
<td style="text-align: center;">10</td>
<td style="text-align: center;">Resilient cities critical infrastructure interdependence: a meta-research</td>
<td style="text-align: center;"><a href="https://doi.org/10.1080/23789689.2020.1795571" class="uri">https://doi.org/10.1080/23789689.2020.1795571</a></td>
<td style="text-align: center;">May Haggag, Mohamed Ezzeldin, Wael El-Dakhakhni, Elkafi Hassini</td>
<td style="text-align: center;">Cities; complex systems; meta-research; resilience; topic modelling</td>
<td style="text-align: center;">Infrastructure</td>
<td style="text-align: center;">2020</td>
</tr>
<tr class="even">
<td style="text-align: center;">11</td>
<td style="text-align: center;">Systematic review of critical infrastructure resilience indicators</td>
<td style="text-align: center;">10.1108/CI-03-2021-0047</td>
<td style="text-align: center;">Robert Osei-Kyei, Laura Melo Almeida, Godslove Ampratwum, Vivian Tam</td>
<td style="text-align: center;">Critical infrastructure, Resilience, Standards, Criteria</td>
<td style="text-align: center;">Infrastructure</td>
<td style="text-align: center;">2022</td>
</tr>
</tbody>
</table>
<p>Upon closer inspection, it was revealed that there weren’t any systematic reviews in the category of economic resilience. This points towards a clear avenue of future research.</p>
</section>
<section id="synthesis-method" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="synthesis-method"><span class="header-section-number">3.2</span> Synthesis Method</h3>
</section>
</section>
<section id="results" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="results"><span class="header-section-number">4</span> Results</h2>
<section id="bibliometric-reporting" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="bibliometric-reporting"><span class="header-section-number">4.1</span> Bibliometric Reporting</h3>
</section>
<section id="resilience-definitions" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="resilience-definitions"><span class="header-section-number">4.2</span> Resilience Definitions</h3>
The various definitions are scraped from each review paper. Some papers try to synthesize the definition of resilience <put some="" example="" papers="" here="" and="" their="" citation="">, and some papers will propose their own definition of resilience
<example papers="" here="">
<p>, while a paper (Cariolet) will simply use a widely cited definition. This particular sub-section aims to explore the conceptualization of social and infrastructure resilience through the various definitions mentioned using word clouds and term frequency (and maybe more?)</p>
<p>The two figures below shows the graphical representation of various definitions of infrastructure resilience.</p>


</example></put></section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>( TITLE-ABS-KEY ( “soci<em>” OR ”commun</em>” OR “neighbour<em>” OR ”urban</em>” OR “econom<em>” OR ”financi</em>” OR “infrastruct<em>” OR ”disast</em>” OR “climate” ) AND TITLE-ABS-KEY ( “resilience” ) AND NOT TITLE-ABS-KEY ( “covid” OR “corona” OR “COVID-19” OR “agri<em>” OR ”supply chain” OR ”agro</em>” OR “land” OR “education” OR “migration” OR “sport” OR “war” OR “coral” OR “farm<em>” ) AND NOT TITLE ( ”politics” OR ”policy” OR ”ecosystem” OR ”forest” OR ”worker” OR ”governance” OR ”river” OR ”ecolo</em>” OR “biodiversity” OR “institution*” ) ) AND ( LIMIT-TO ( SRCTYPE , “j” ) ) AND ( LIMIT-TO ( DOCTYPE , “re” ) ) AND ( EXCLUDE ( SUBJAREA , “MEDI” ) OR EXCLUDE ( SUBJAREA , “AGRI” ) OR EXCLUDE ( SUBJAREA , “PSYC” ) OR EXCLUDE ( SUBJAREA , “BIOC” ) OR EXCLUDE ( SUBJAREA , “COMP” ) OR EXCLUDE ( SUBJAREA , “NEUR” ) OR EXCLUDE ( SUBJAREA , “NURS” ) OR EXCLUDE ( SUBJAREA , “IMMU” ) OR EXCLUDE ( SUBJAREA , “CENG” ) OR EXCLUDE ( SUBJAREA , “HEAL” ) OR EXCLUDE ( SUBJAREA , “PHYS” ) OR EXCLUDE ( SUBJAREA , “CHEM” ) OR EXCLUDE ( SUBJAREA , “PHAR” ) OR EXCLUDE ( SUBJAREA , “VETE” ) OR EXCLUDE ( SUBJAREA , “DENT” ) OR EXCLUDE ( SUBJAREA , “ARTS” ) OR EXCLUDE ( SUBJAREA , “BUSI” ) OR EXCLUDE ( SUBJAREA , “MATH” ) OR EXCLUDE ( SUBJAREA , “MATE” ) ) AND ( LIMIT-TO ( LANGUAGE , “English” ) ) AND ( LIMIT-TO ( EXACTKEYWORD , “Resilience” ) OR LIMIT-TO ( EXACTKEYWORD , “Climate Change” ) OR LIMIT-TO ( EXACTKEYWORD , “Disasters” ) OR LIMIT-TO ( EXACTKEYWORD , “Disaster” ) )<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>AND TITLE-ABS-KEY ( “review” OR “overview” OR “survey” )<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>